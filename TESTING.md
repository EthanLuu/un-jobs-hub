# UN Jobs Hub - æµ‹è¯•æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬æ–‡æ¡£ä»‹ç»äº† UN Jobs Hub é¡¹ç›®çš„æµ‹è¯•ç­–ç•¥ã€æµ‹è¯•å¥—ä»¶å’Œè¿è¡Œæ–¹æ³•ã€‚é¡¹ç›®åŒ…å«å…¨é¢çš„å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•å’Œç«¯åˆ°ç«¯æµ‹è¯•ã€‚

## ğŸ§ª æµ‹è¯•ç»“æ„

### åç«¯æµ‹è¯•

```
backend/
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ conftest.py              # æµ‹è¯•é…ç½®å’Œfixtures
â”‚   â”œâ”€â”€ unit/                   # å•å…ƒæµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_models.py      # æ•°æ®æ¨¡å‹æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_services.py    # æœåŠ¡å±‚æµ‹è¯•
â”‚   â”‚   â”œâ”€â”€ test_utils.py       # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â”‚   â””â”€â”€ test_crawlers.py    # çˆ¬è™«æµ‹è¯•
â”‚   â””â”€â”€ integration/            # é›†æˆæµ‹è¯•
â”‚       â””â”€â”€ test_api.py         # APIç«¯ç‚¹æµ‹è¯•
â”œâ”€â”€ pytest.ini                 # pytesté…ç½®
â””â”€â”€ requirements-test.txt       # æµ‹è¯•ä¾èµ–
```

### å‰ç«¯æµ‹è¯•

```
frontend/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ __tests__/         # ç»„ä»¶æµ‹è¯•
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â”œâ”€â”€ __tests__/         # å·¥å…·å‡½æ•°æµ‹è¯•
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ __tests__/
â”‚       â””â”€â”€ integration/       # é›†æˆæµ‹è¯•
â”œâ”€â”€ jest.config.js            # Jesté…ç½®
â”œâ”€â”€ jest.setup.js             # Jestè®¾ç½®
â””â”€â”€ package.json              # åŒ…å«æµ‹è¯•è„šæœ¬
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å®‰è£…æµ‹è¯•ä¾èµ–

```bash
# å®‰è£…æ‰€æœ‰æµ‹è¯•ä¾èµ–
make test-coverage

# æˆ–è€…æ‰‹åŠ¨å®‰è£…
cd backend && pip install -r requirements-test.txt
cd frontend && npm install
```

### è¿è¡Œæ‰€æœ‰æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# æˆ–è€…ä½¿ç”¨Pythonè„šæœ¬
python run_tests.py
```

## ğŸ“Š æµ‹è¯•ç±»å‹

### 1. å•å…ƒæµ‹è¯• (Unit Tests)

æµ‹è¯•å•ä¸ªå‡½æ•°ã€ç±»æˆ–ç»„ä»¶çš„åŠŸèƒ½ã€‚

**åç«¯å•å…ƒæµ‹è¯•:**
- æ•°æ®æ¨¡å‹ (User, Job, Resume, Favorite)
- æœåŠ¡å±‚ (åŒ¹é…ç®—æ³•ã€ç®€å†è§£æ)
- å·¥å…·å‡½æ•° (è®¤è¯ã€éªŒè¯ã€æ•°æ®å¤„ç†)
- çˆ¬è™«åŠŸèƒ½

**å‰ç«¯å•å…ƒæµ‹è¯•:**
- Reactç»„ä»¶ (Hero, Features, Stats, Button, Input)
- å·¥å…·å‡½æ•° (æ ¼å¼åŒ–ã€éªŒè¯ã€APIå®¢æˆ·ç«¯)
- è‡ªå®šä¹‰hooks

### 2. é›†æˆæµ‹è¯• (Integration Tests)

æµ‹è¯•å¤šä¸ªç»„ä»¶æˆ–æ¨¡å—ä¹‹é—´çš„äº¤äº’ã€‚

**åç«¯é›†æˆæµ‹è¯•:**
- APIç«¯ç‚¹å®Œæ•´æµç¨‹
- æ•°æ®åº“æ“ä½œ
- è®¤è¯æµç¨‹
- æ–‡ä»¶ä¸Šä¼ å¤„ç†

**å‰ç«¯é›†æˆæµ‹è¯•:**
- é¡µé¢çº§ç»„ä»¶äº¤äº’
- APIè°ƒç”¨æµç¨‹
- ç”¨æˆ·äº¤äº’æµç¨‹

### 3. ç«¯åˆ°ç«¯æµ‹è¯• (E2E Tests)

æµ‹è¯•å®Œæ•´çš„ç”¨æˆ·æµç¨‹ã€‚

## ğŸ”§ æµ‹è¯•å‘½ä»¤

### ä½¿ç”¨ Makefile

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test

# åªè¿è¡Œåç«¯æµ‹è¯•
make test-backend

# åªè¿è¡Œå‰ç«¯æµ‹è¯•
make test-frontend

# åªè¿è¡Œå•å…ƒæµ‹è¯•
make test-unit

# åªè¿è¡Œé›†æˆæµ‹è¯•
make test-integration

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
make test-coverage

# ç›‘è§†æ¨¡å¼è¿è¡Œæµ‹è¯•
make test-watch

# CI/CDç¯å¢ƒè¿è¡Œæµ‹è¯•
make test-ci
```

### ä½¿ç”¨ Python è„šæœ¬

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
python run_tests.py

# åªè¿è¡Œåç«¯æµ‹è¯•
python run_tests.py --backend

# åªè¿è¡Œå‰ç«¯æµ‹è¯•
python run_tests.py --frontend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•åŒ…æ‹¬ä»£ç æ£€æŸ¥
python run_tests.py --all

# å®‰è£…ä¾èµ–å¹¶è¿è¡Œæµ‹è¯•
python run_tests.py --install-deps
```

### ç›´æ¥ä½¿ç”¨æµ‹è¯•å·¥å…·

**åç«¯æµ‹è¯•:**
```bash
cd backend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pytest

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pytest tests/unit/test_models.py

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
pytest tests/unit/test_models.py::TestUserModel

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–¹æ³•
pytest tests/unit/test_models.py::TestUserModel::test_create_user

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pytest --cov=. --cov-report=html

# è¿è¡Œæµ‹è¯•å¹¶ç›‘è§†æ–‡ä»¶å˜åŒ–
pytest -f
```

**å‰ç«¯æµ‹è¯•:**
```bash
cd frontend

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
npm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
npm run test:coverage

# ç›‘è§†æ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:watch

# CIæ¨¡å¼è¿è¡Œæµ‹è¯•
npm run test:ci
```

## ğŸ“ˆ è¦†ç›–ç‡è¦æ±‚

é¡¹ç›®è®¾ç½®äº†ä»¥ä¸‹è¦†ç›–ç‡è¦æ±‚ï¼š

- **åç«¯**: 80% ä»¥ä¸Š
- **å‰ç«¯**: 70% ä»¥ä¸Š

### æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Š

**åç«¯è¦†ç›–ç‡æŠ¥å‘Š:**
```bash
cd backend
pytest --cov=. --cov-report=html
open htmlcov/index.html
```

**å‰ç«¯è¦†ç›–ç‡æŠ¥å‘Š:**
```bash
cd frontend
npm run test:coverage
open coverage/lcov-report/index.html
```

## ğŸ¯ æµ‹è¯•æœ€ä½³å®è·µ

### 1. æµ‹è¯•å‘½å

- ä½¿ç”¨æè¿°æ€§çš„æµ‹è¯•åç§°
- éµå¾ª `test_<function_name>_<scenario>` æ ¼å¼
- ä½¿ç”¨ä¸­æ–‡æè¿°æµ‹è¯•åœºæ™¯

### 2. æµ‹è¯•ç»“æ„

```python
# åç«¯æµ‹è¯•ç»“æ„
def test_function_name_scenario():
    """Test description."""
    # Arrange (å‡†å¤‡)
    # Act (æ‰§è¡Œ)
    # Assert (æ–­è¨€)
```

```typescript
// å‰ç«¯æµ‹è¯•ç»“æ„
describe('Component Name', () => {
  it('should do something when condition', () => {
    // Arrange
    // Act
    // Assert
  })
})
```

### 3. æµ‹è¯•æ•°æ®

- ä½¿ç”¨ fixtures ç®¡ç†æµ‹è¯•æ•°æ®
- é¿å…ç¡¬ç¼–ç æµ‹è¯•æ•°æ®
- ä½¿ç”¨ Faker ç”Ÿæˆéšæœºæµ‹è¯•æ•°æ®

### 4. æ¨¡æ‹Ÿ (Mocking)

- æ¨¡æ‹Ÿå¤–éƒ¨ä¾èµ– (APIè°ƒç”¨ã€æ•°æ®åº“)
- æ¨¡æ‹Ÿç”¨æˆ·äº¤äº’
- æ¨¡æ‹Ÿå¼‚æ­¥æ“ä½œ

## ğŸ› è°ƒè¯•æµ‹è¯•

### åç«¯æµ‹è¯•è°ƒè¯•

```bash
# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
pytest -v -s

# åœ¨ç¬¬ä¸€ä¸ªå¤±è´¥æ—¶åœæ­¢
pytest -x

# è¿è¡Œå¤±è´¥çš„æµ‹è¯•
pytest --lf

# è°ƒè¯•ç‰¹å®šæµ‹è¯•
pytest --pdb tests/unit/test_models.py::test_create_user
```

### å‰ç«¯æµ‹è¯•è°ƒè¯•

```bash
# è¿è¡Œæµ‹è¯•å¹¶æ˜¾ç¤ºè¯¦ç»†è¾“å‡º
npm test -- --verbose

# è°ƒè¯•æ¨¡å¼è¿è¡Œæµ‹è¯•
npm test -- --detectOpenHandles

# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
npm test -- --testPathPattern=hero.test.tsx
```

## ğŸ”„ CI/CD é›†æˆ

é¡¹ç›®é…ç½®äº† GitHub Actions æ¥è‡ªåŠ¨è¿è¡Œæµ‹è¯•ï¼š

- **è§¦å‘æ¡ä»¶**: Push åˆ° main/develop åˆ†æ”¯ï¼ŒPull Request
- **æµ‹è¯•ç¯å¢ƒ**: Ubuntu Latest, Python 3.11/3.12, Node.js 18/20
- **æœåŠ¡**: PostgreSQL 16, Redis 7
- **æ£€æŸ¥é¡¹ç›®**: å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ã€ä»£ç è¦†ç›–ç‡ã€ä»£ç è´¨é‡ã€å®‰å…¨æ‰«æ

### æŸ¥çœ‹ CI/CD çŠ¶æ€

1. è®¿é—® GitHub Actions é¡µé¢
2. æŸ¥çœ‹æœ€æ–°çš„æµ‹è¯•è¿è¡Œç»“æœ
3. ä¸‹è½½æµ‹è¯•æŠ¥å‘Šå’Œè¦†ç›–ç‡æŠ¥å‘Š

## ğŸ“ ç¼–å†™æ–°æµ‹è¯•

### åç«¯æµ‹è¯•

1. åœ¨ `tests/unit/` æˆ– `tests/integration/` ä¸­åˆ›å»ºæµ‹è¯•æ–‡ä»¶
2. ä½¿ç”¨ç°æœ‰çš„ fixtures å’Œæµ‹è¯•å·¥å…·
3. éµå¾ªæµ‹è¯•å‘½åè§„èŒƒ
4. ç¡®ä¿æµ‹è¯•è¦†ç›–ç‡

### å‰ç«¯æµ‹è¯•

1. åœ¨ç»„ä»¶ç›®å½•ä¸‹åˆ›å»º `__tests__` æ–‡ä»¶å¤¹
2. åˆ›å»º `.test.tsx` æ–‡ä»¶
3. ä½¿ç”¨ React Testing Library
4. æ¨¡æ‹Ÿå¿…è¦çš„ä¾èµ–

## ğŸš¨ å¸¸è§é—®é¢˜

### 1. æµ‹è¯•ç¯å¢ƒé—®é¢˜

**é—®é¢˜**: æ•°æ®åº“è¿æ¥å¤±è´¥
**è§£å†³**: ç¡®ä¿æµ‹è¯•æ•°æ®åº“æ­£åœ¨è¿è¡Œ
```bash
make db-up
```

**é—®é¢˜**: ä¾èµ–å®‰è£…å¤±è´¥
**è§£å†³**: æ¸…ç†ç¼“å­˜å¹¶é‡æ–°å®‰è£…
```bash
make clean
make install
```

### 2. æµ‹è¯•å¤±è´¥é—®é¢˜

**é—®é¢˜**: æµ‹è¯•è¶…æ—¶
**è§£å†³**: æ£€æŸ¥å¼‚æ­¥æ“ä½œæ˜¯å¦æ­£ç¡®ç­‰å¾…
```python
await asyncio.sleep(0.1)  # ç­‰å¾…å¼‚æ­¥æ“ä½œå®Œæˆ
```

**é—®é¢˜**: æ¨¡æ‹Ÿä¸å·¥ä½œ
**è§£å†³**: ç¡®ä¿æ­£ç¡®å¯¼å…¥å’Œé…ç½®æ¨¡æ‹Ÿ
```python
@patch('module.function')
def test_something(mock_function):
    # æµ‹è¯•ä»£ç 
```

### 3. è¦†ç›–ç‡é—®é¢˜

**é—®é¢˜**: è¦†ç›–ç‡ä¸è¾¾æ ‡
**è§£å†³**: 
1. æ£€æŸ¥æ˜¯å¦æœ‰æœªæµ‹è¯•çš„ä»£ç è·¯å¾„
2. æ·»åŠ è¾¹ç•Œæ¡ä»¶æµ‹è¯•
3. ç¡®ä¿æ‰€æœ‰åˆ†æ”¯éƒ½è¢«è¦†ç›–

## ğŸ“š ç›¸å…³èµ„æº

- [pytest æ–‡æ¡£](https://docs.pytest.org/)
- [Jest æ–‡æ¡£](https://jestjs.io/docs/getting-started)
- [React Testing Library æ–‡æ¡£](https://testing-library.com/docs/react-testing-library/intro/)
- [FastAPI æµ‹è¯•æ–‡æ¡£](https://fastapi.tiangolo.com/tutorial/testing/)

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. ä¸ºæ–°åŠŸèƒ½ç¼–å†™æµ‹è¯•
2. ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
3. ä¿æŒæˆ–æé«˜æµ‹è¯•è¦†ç›–ç‡
4. éµå¾ªæµ‹è¯•æœ€ä½³å®è·µ
5. æ›´æ–°æµ‹è¯•æ–‡æ¡£

---

**æœ€åæ›´æ–°**: 2024å¹´12æœˆ19æ—¥  
**ç‰ˆæœ¬**: v1.0.0
